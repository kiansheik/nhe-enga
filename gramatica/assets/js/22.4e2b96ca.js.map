{"version":3,"sources":["webpack:///src/.vuepress/components/py.vue","webpack:///./src/.vuepress/components/py.vue","webpack:///./src/.vuepress/components/py.vue?1e52","webpack:///./src/.vuepress/components/py.vue?daf7","webpack:///./src/.vuepress/components/py.vue?3a6c","webpack:///./src/.vuepress/components/py.vue?5779","webpack:///./src/.vuepress/components/py.vue?c345"],"names":["name","data","pl","pyodideReady","layoutComponent","$root","$refs","layout","$children","length","firstChildComponent","pyLoader","console","log","otherComponentLoaded","pyRendered","tText","methods","handleMessage","event","command","pre_html","resp_html","updateContent","$slots","default","text","iframe","pyodideiframe","message","orderid","getCurrentComponentIndex","html","contentWindow","postMessage","getAllPyComponents","pyComponents","pyElements","document","querySelectorAll","element","push","allPyComponents","indexOf","$el","computed","watch","newVal","oldVal","mounted","window","addEventListener","eventBus","$on","to","from","beforeDestroy","removeEventListener","$off","render","_vm","_c","_self","staticClass","domProps","_s","staticRenderFns"],"mappings":"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","file":"assets/js/22.4e2b96ca.js","sourcesContent":["<template>\n        <div class=\"python-output\" v-text=\"tText\"></div>\n</template>\n    \n<script>\nimport { eventBus } from '../eventBus';\n// import { ClientOnly } from 'vue';\n\nexport default {\n    // components: { ClientOnly },\n    name: 'py',\n    data() {\n        let pl = {pyodideReady:false};\n        let layoutComponent = this.$root.$refs.layout;\n        if (layoutComponent && layoutComponent.$children.length > 0) {\n            let firstChildComponent = layoutComponent.$children[0];\n            if (firstChildComponent.$refs.pyLoader) {\n                pl = firstChildComponent.$refs.pyLoader;\n            } else {\n                console.log('no pyLoader')\n            }\n        } else {\n            console.log('no layoutComponent')\n        }        \n        return {\n            otherComponentLoaded: pl.pyodideReady,\n            pyLoader: pl,\n            pyRendered: false,\n            tText: 'rendering...' // this.$slots.default[0].text // Add this line\n        };\n    },\n    methods: {\n        handleMessage(event) {\n            // Check the command of the message\n            if (event.data.command === 'processBlockResponse' && event.data.pre_html === this.tText) {\n                // Handle the message\n                this.tText = event.data.resp_html;\n                this.pyRendered = true;\n            }\n        },\n        updateContent() {\n            if (this.pyRendered) {\n                return;\n            }\n            this.tText = this.$slots.default[0].text;\n            let iframe;\n            if (this.pyLoader && this.pyLoader.$refs && this.pyLoader.$refs.pyodideiframe) {\n                iframe = this.pyLoader.$refs.pyodideiframe;\n            // Use iframe here\n            } else {\n                console.log('no iframe')\n            }\n            // Create the message\n            let message = {\n                command: 'processBlock',\n                orderid: this.getCurrentComponentIndex(),\n                html: this.tText // Send the transformed text as the HTML\n            };\n\n            // Send the message to the iframe\n            if (iframe) {\n                iframe.contentWindow.postMessage(message, '*');\n            } else {\n                console.log('no iframe 2')\n            }\n        },\n        getAllPyComponents() {\n            let pyComponents = [];\n\n            // Get all <py> elements in the DOM order\n            let pyElements = document.querySelectorAll('div.python-output');\n\n            for (let element of pyElements) {\n                    pyComponents.push(element);\n            }\n\n            return pyComponents;\n        },\n        getCurrentComponentIndex() {\n            let allPyComponents = this.getAllPyComponents();\n            // console.log(allPyComponents)\n            // Return the index of the current component's div.python-output element in the array\n            return allPyComponents.indexOf(this.$el);\n        }\n    },\n    computed: {\n        pyodideReady() {\n            let pl = {pyodideReady:false};\n            let layoutComponent = this.$root.$refs.layout;\n            if (layoutComponent && layoutComponent.$children.length > 0) {\n                let firstChildComponent = layoutComponent.$children[0];\n                if (firstChildComponent.$refs.pyLoader) {\n                    pl = firstChildComponent.$refs.pyLoader;\n                }\n            }   \n            return pl.pyodideReady;\n        }\n    },\n    watch: {\n        pyodideReady(newVal, oldVal) {\n            if (newVal) {\n                this.updateContent();\n            }\n        },\n    },\n    mounted() {\n        window.addEventListener('message', this.handleMessage);\n        if (this.pyodideReady) {\n            this.updateContent();\n        }\n        eventBus.$on('softNavigationFinished', (to, from) => {\n            if (this.pyodideReady) {\n                this.updateContent();\n            }\n        });\n    },\n    beforeDestroy() {\n        window.removeEventListener('message', this.handleMessage);\n        eventBus.$off('softNavigationFinished');\n    },\n}\n</script>\n<style>\n.python-output {\n    display: inline-block;\n}\n</style>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"python-output\",domProps:{\"textContent\":_vm._s(_vm.tText)}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// extracted by mini-css-extract-plugin","import { render, staticRenderFns } from \"./py.vue?vue&type=template&id=47d1057c\"\nimport script from \"./py.vue?vue&type=script&lang=js\"\nexport * from \"./py.vue?vue&type=script&lang=js\"\nimport style0 from \"./py.vue?vue&type=style&index=0&id=47d1057c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./py.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./py.vue?vue&type=script&lang=js\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./py.vue?vue&type=style&index=0&id=47d1057c&prod&lang=css\"","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"4c95426e-vue-loader-template\\\"}!../../../node_modules/cache-loader/dist/cjs.js??ref--3-0!../../../node_modules/babel-loader/lib/index.js??ref--3-1!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./py.vue?vue&type=template&id=47d1057c\""],"sourceRoot":""}