(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{316:function(e,t,o){"use strict";o.r(t);o(96),o(90);const s=new(o(0).a)({data:{eventQueue:[]},methods:{emit(e,...t){this._events&&this._events[e]?this.$emit(e,...t):this.eventQueue.push({event:e,args:t})},on(e,t){this.$on(e,t),this.eventQueue=this.eventQueue.filter(t=>t.event!==e||(this.$emit(e,...t.args),!1))}}});var n=o(312),i={data:()=>({pyodideReady:!1,pyodideLoaded:!1,dictLoaded:!1,evBus:s,basePath:"/nhe-enga/gramatica/",elems:[],jsonData:null}),methods:{async loadJson(){try{const e=await fetch("/nhe-enga/docs/dict-conjugated.json.gz");if(!e.ok)throw new Error("HTTP error! status: "+e.status);const t=await e.arrayBuffer(),o=n.a.inflate(t,{to:"string"}),s=JSON.parse(o);this.jsonData=s,this.dictLoaded=!0,console.log("dict loaded!"),this.pyodideLoaded&&(this.pyodideReady=!0,this.updateContent())}catch(e){console.error("There was a problem loading the JSON file:",e)}},getAllPyComponents:()=>Array.from(document.querySelectorAll(".python-output")),getCurrentComponentIndex(e){return this.getAllPyComponents().indexOf(e)},countComponents(){return this.getAllPyComponents().length},receiveMessage(e){e.data.pyodideLoaded&&(this.pyodideLoaded=!0,console.log("pyodide Loaded!"),this.dictLoaded&&(console.log("dict loaded!"),this.pyodideReady=!0,this.updateContent()))},sendMessagesToIframe(){for(let e of this.messages)this.$refs.pyodideiframe.contentWindow.postMessage(e.command,"*")},updateContent(e){let t=this.getAllPyComponents().map(e=>e.__vue__);for(let e=0;e<t.length;e++){let o=t[e],s={command:"processBlock",orderid:e,hash:o.hash,html:o.origText};this.$refs.pyodideiframe.contentWindow.postMessage(s,"*")}},findDefinition(e,t){t=t||"";for(let o of this.jsonData){if(o.f===e&&o.o===t)return o.d.replace(/"/g,'\\"');if(""===t&&o.f===e&&"1"===o.o)return o.d.replace(/"/g,'\\"')}return null}},created(){this.loadJson()},mounted(){this.evBus.$on("pyReadyRender",(e,t)=>{this.elems.push(e);let o=this.countComponents();this.pyodideReady&&this.elems.length>=o&&this.updateContent(!0)}),window.addEventListener("message",this.receiveMessage)},beforeDestroy(){window.removeEventListener("message",this.receiveMessage)}},d=o(15),a=Object(d.a)(i,(function(){var e=this._self._c;return e("div",[e("iframe",{ref:"pyodideiframe",staticStyle:{display:"none"},attrs:{id:"pyodide-iframe",src:this.basePath+"iframe_pyodide.html"}})])}),[],!1,null,null,null);t.default=a.exports}}]);